# **실습: Amazon S3에서 이전 버전의 개체 복원하기**
이 실습에서는 AWS 관리 콘솔과 AWS CLI를 사용하여 S3 버킷에서 버전 관리를 활성화하고, 개체의 여러 버전을 업로드하고, 이전 버전을 복원하는 방법을 배우게 됩니다.
Amazon S3 버전 관리는 개체의 여러 버전을 유지하여 우발적인 삭제 또는 덮어쓰기로부터 데이터를 보호하는 강력한 메커니즘을 제공합니다. 버전 관리를 활성화하고 CLI 또는 관리 콘솔과 같은 AWS 도구를 사용하면 개체 버전을 쉽게 관리하고 이전 상태를 복원할 수 있습니다.

이 튜토리얼에서는 AWS 관리 콘솔과 AWS CLI를 모두 사용하여 버전 관리를 활성화하고, 개체 버전을 관리하고, 이전 버전을 복원하는 방법을 안내했습니다.
</br></br>
버전 관리를 위한 실제 사용 사례
- 문서 관리 시스템: S3의 버전 관리는 사용자가 여러 버전의 문서를 업로드하는 시나리오에서 특히 유용하며, 최신 버전에 오류나 우발적인 변경 사항이 포함된 경우 이전 버전으로 되돌릴 필요가 있습니다.
- 백업 및 복구: 중요한 백업이 S3에 저장되는 경우 버전 관리를 활성화하면 관리자가 실수로 삭제되거나 손상된 경우 이전 버전을 복원할 수 있습니다.
</br>

## **사전 요건**
1. **AWS 계정**: AWS 계정이 있는지 확인하세요.
2. **IAM 권한**: S3에 액세스하고 버전 관리를 관리할 수 있는 충분한 권한이 있어야 합니다.
</br>

## **단계별 실습 가이드**

### **1단계: S3 버킷에서 버전 설정 활성화**
1. **AWS 관리 콘솔에 로그인**
2. **S3 대시보드**로 이동합니다.
3. **새 버킷 만들기** (또는 기존 버킷 사용):
- **버킷 만들기**를 클릭하세요.
- **고유한 버킷 이름**을 제공하십시오(예: `my-versioning-enabled-bucket`).
- 선호하는 **AWS 지역**을 선택하세요.
- 다른 설정을 기본값으로 유지하세요 (사용 사례에 따라 공용 액세스를 활성화/비활성화할 수 있습니다).
- **버킷 만들기**를 클릭하세요.
4. **버전 활성화**:
- 버킷의 **속성** 탭으로 이동하십시오.
- **Bucket Versioning**으로 스크롤하세요.
- **버전 사용**을 클릭합니다.
- **저장**을 클릭하세요.
</br>

### **2단계: 개체 업로드(첫 번째 버전)**
1. S3 버킷 내의 **Objects** 탭으로 이동합니다.
2. **업로드**를 클릭하여 개체를 추가하십시오(예: `myfile.txt`).
3. 로컬 시스템에서 파일을 선택하고 **업로드**를 클릭하세요.
4. 업로드가 완료되면 버킷에 개체가 보입니다.
</br>

### **3단계: 동일한 개체의 새 버전 업로드**
1. **개체** 탭에서 **업로드**를 다시 클릭하세요.
2. **동일한 파일**(`myfile.txt`) 또는 로컬 시스템에서 업데이트된 버전의 파일을 선택하십시오.
3. **업로드**를 클릭하세요. 이렇게 하면 버킷에 있는 개체의 새 버전이 생성됩니다.
</br>

### **4단계: 개체 버전 보기**
1. 버킷의 **개체** 탭으로 이동합니다.
2. 개체 목록의 오른쪽 상단에 있는 **버전 표시** 토글을 클릭하세요. 이제 객체의 현재 버전과 이전 버전(`myfile.txt`)을 모두 볼 수 있습니다.
3. 최신 버전은 더 높은 **버전 ID**를 가질 것이다.
</br>

### **5단계: 개체의 이전 버전 복원(AWS 콘솔 사용)**
1. 버전이 표시된 **개체** 탭에서 복원하려는 개체(이 경우 `myfile.txt`)를 찾습니다.
2. **버전 ID**를 확인하여 이전 버전을 식별합니다(이전 버전은 다른 버전 ID를 갖습니다).
3. 이전 버전 다운로드:
- 개체의 **이전 버전**을 클릭하세요.
- 이전 버전을 로컬 컴퓨터에 다운로드하려면 **다운로드**를 클릭하십시오.
4. **이전 버전 복원**:
- 이전 버전을 최신 버전으로 "복원"하려면, 다운로드한 `myfile.txt` 버전을 버킷에 다시 업로드하기만 하면 됩니다. 이것은 최신 버전이 될 것입니다.
</br>

## **6단계: 개체의 이전 버전 복원(AWS CLI 사용)**
AWS CLI를 사용하여 이전 버전의 개체를 복원할 수도 있습니다.
1. **목록 개체 버전**:
다음 명령을 사용하여 대상체의 모든 버전을 나열합니다.

```bash
aws s3api list-object-versions --bucket my-versioning-enabled-bucket --prefix myfile.txt
```

이것은 **버전 ID**와 함께 `myfile.txt`의 모든 버전의 목록을 반환합니다.

2. **특정 버전 다운로드**:
개체의 이전 버전을 다운로드하려면 다음 명령을 사용하십시오.

```bash
aws s3api get-object --bucket my-versioning-enabled-bucket --key myfile.txt --version-id <Version-ID> myfile-previous.txt
```

복원하려는 실제 버전 ID로 `<Version-ID>`를 바꿉니다. 이것은 `myfile.txt`의 이전 버전을 `myfile-previous.txt`로 다운로드합니다.

3. **이전 버전을 업로드하여 복원**:
이전 버전을 현재 버전으로 복원하려면 다운로드한 파일을 S3 버킷에 다시 업로드합니다.

```bash
aws s3 cp myfile-previous.txt s3://my-versioning-enabled-bucket/myfile.txt
```

이것은 이전 버전을 최신 버전으로 만들 것이다.
</br></br>


## **7단계: 특정 버전 삭제**
이 튜토리얼에서는 AWS 관리 콘솔과 AWS CLI를 모두 사용하여 버전 관리 활성화, 개체 버전 관리 및 이전 버전 복원에 대해 안내했습니다.
</br>
