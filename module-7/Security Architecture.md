# **매우 안전하고 확장 가능한 AWS 웹 애플리케이션**
![이미지](https://github.com/user-attachments/assets/297660fb-6905-40d3-ac41-b7ef67f33891)


## **1. Front-End Security (사용자 to AWS)**

| 구성요소 | 보안 역할 |
| -------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| **Route 53** | 안전한 DNS 관리. **DNSSEC**를 사용하여 스푸핑을 방지합니다. |
| **AWS WAF** | **SQLi**, **XSS**, **bot scraping** 및 **허가받지 않은 IP**와 같은 웹 공격으로부터 보호합니다. |
| **AWS CloudFront** | **HTTPS**를 지원하는 글로벌 **CDN**; 콘텐츠를 캐시하고 원본에 대한 직접 히트를 줄입니다(노출 감소). |
| **AWS Shield** | **DDoS 보호** – 표준은 무료입니다; 고급은 더 크고 복잡한 공격으로부터 보호합니다. |

**🛡 이점:** 프론트엔드는 애플리케이션에 도달하기 전에 OSI Layer 3–7 계층 공격으로부터 잘 보호됩니다.


## **2. 네트워크 보안(VPC 수준)**

| 요소 | 보안 가치 |
| -------------------------------- | -------------------------------------------------------------------------------------------------------- |
| **VPC** | **개인 클라우드**(공유되지 않음)에서 전체 앱을 격리합니다. |
| **공용 서브넷** | **NAT 게이트웨이** 및 **로드 밸런서**만 앱 또는 DB 서버가 아닌 공용입니다. |
| **개인 서브넷** | 웹, 앱 및 DB 서버는 인터넷으로부터 **고립되어 있습니다**. |
| **NAT 게이트웨이** | 비공개 서브넷에서 **아웃바운드 인터넷 액세스**를 공개적으로 노출하지 않고 허용**. |

**🛡 이점:** 공격 표면이 최소화됩니다. 로드 밸런서만 사용자에게 노출됩니다.


## **3. 응용 프로그램 보안(웹 및 앱 계층)**

| 레이어 | 보안 제어 |
| --------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| **웹 EC2 인스턴스** | **웹 서브넷**에 배치됨, **로드 밸런서 뒤에**, ALB의 트래픽만 허용. **웹 SG**를 사용하세요. |
| **앱 EC2 인스턴스** | 개인 앱 서브넷에서 **웹 계층에서만 트래픽을 받을 수 있습니다**. 엄격한 인바운드 규칙과 함께 **앱 SG**를 사용하세요. |

**추가 모범 사례:**
* 최소 권한에 대해 **인스턴스 수준 IAM 역할**을 활성화합니다.
* 관리자 액세스를 위해 SSH 대신 **SSM 세션 관리자**를 사용하십시오(열려 있는 포트 없음).
* AMI를 굳게 하고 SSM을 통해 **패치 관리**를 사용합니다.


## **4. 데이터 보안(데이터베이스, 캐싱, 스토리지)**

| 구성 요소 | 보안 구현 |
| --------------------------------- | -------------------------------------------------------------------------------- |
| **Amazon RDS** | **KMS**로 암호화, **개인 DB 서브넷**에 배치, **앱 SG**에서만 액세스할 수 있습니다 |
| **RDS Multi-AZ** | **HA** + 자동 장애 조치 보장. |
| **Amazon ElastiCache** | **암호화된 전송 중 및 휴식 중 Redis/Memcached** 캐싱을 제공합니다. DB 서브넷에서 격리됨. |
| **Amazon EFS** | **EFS 암호화**, 개인 마운트 포인트를 사용할 수 있습니다. **개인 서브넷의 마운트 대상**을 통한 액세스. |

**🛡 혜택:** 공개 노출 금지. 데이터는 IAM + SG + 서브넷 격리를 사용하여 암호화되고 액세스가 제어됩니다.


## **5. IAM 및 액세스 제어**

| 연습 | 혜택 |
| ------------------------------------------------ | -------------------------------------------------------------------------------- |
| **EC2의 IAM 역할** | 필요한 권한만 부여됨(예: S3에서 읽기, CloudWatch로 쓰기). |
| **No hardcoded secrets** | DB/API 비밀에 대해 **AWS Secrets Manager** 또는 **SSM Parameter Store**를 사용하세요. |
| **IAM policies scoped to services** | 권한 에스컬레이션을 방지하기 위한 세밀한 액세스. |


## **6. 로깅 및 모니터링(구현 모범 사례)**

표시되지는 않지만 다음을 추가해야 합니다.

* **CloudTrail** → API 활동 추적
* **VPC 흐름 로그** → 서브넷 수준 트래픽 모니터링
* **CloudWatch** → 로그, 지표, 알람
* **GuardDuty** → 계정에 대한 위협 탐지, IAM 이상, DNS 기반 공격


# **이 아키텍처의 보안 하이라이트**

| 보안 계층 | 서비스 및 기술 |
| ------------------------------------------------- | ---------------------------------------------------------------- |
| **Perimeter** | AWS WAF, Shield, CloudFront |
| **네트워크** | VPC, Private Subnets, NAT |
| **액세스 제어** | IAM roles, SGs, least privilege |
| **데이터 보안** | RDS encryption, private subnets, EFS, Secrets Manager |
| **로깅** | CloudTrail, GuardDuty, VPC Flow Logs |
| **제로 트러스트 접근 방식** | 직접 접근 없음 — 모든 것이 검증 계층을 통과합니다 |


## 이를 배포하는 경우:

1. AZ에 걸쳐 공용 및 개인 서브넷으로 VPC 설정
2. S3, CloudFront, Route 53 및 WAF 설정
3. 개인 서브넷 아웃바운드 액세스를 위해 각 AZ에 NAT 게이트웨이 배포
4. Web ASG 및 App ASG에 연결된 ALB(웹 및 앱 계층) 배포
5. IAM 역할, SG 및 서브넷을 사용하여 최소 권한 및 격리 적용
6. KMS로 모든 데이터(RDS, EFS, ElastiCache) 암호화
7. GuardDuty, CloudTrail 및 VPC 흐름 로그 활성화

