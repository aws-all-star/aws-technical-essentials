# **Lab 1: IAM 사용자 및 그룹 생성**

#### **Objective:**

- IAM 사용자 및 그룹 생성
- AWS 관리 정책을 사용하여 권한을 할당
- 신규 사용자로 로그인하여 액세스를 테스트

#### **Steps:**

1. **Create an IAM Group**

   - Go to the **IAM Dashboard**.
   - Click on **Groups** > **Create New Group**.
   - **Group Name**: `Developers`.
   - **Attach Policies**:
     - Select `AmazonEC2FullAccess` and `AmazonS3FullAccess`.
   - Click **Create Group**.

2. **Create IAM Users**

   - Navigate to **Users** > **Add User**.
   - **Usernames**: `alice`, `bob`.
   - **Access Type**:
     - Check **Programmatic access** (for API, CLI, SDK).
     - Check **AWS Management Console access**.
   - **Console Password**:
     - Choose **Autogenerated password** or set a custom password.
   - Click **Next: Permissions**.

3. **Add Users to Group**

   - On the **Permissions** page, select **Add user to group**.
   - Select the `Developers` group.
   - Click **Next: Tags** (optional), then **Next: Review**, and **Create User**.

4. **Retrieve Credentials**

   - Download the `.csv` file containing the users' access keys and passwords.
   - **Note**: Securely store the credentials.

5. **Test User Access**

   - Log out of the AWS console.
   - Log in using the **IAM User Sign-In URL** with `alice`'s credentials.
   - Verify that `alice` can access EC2 and S3 services.

### **Lab 2: Creating and Assigning an IAM Role to an EC2 Instance**

#### **Objective:**

- Create an IAM role that allows EC2 instances to access S3.
- Launch an EC2 instance with this role.
- Access S3 from the EC2 instance without using access keys.

#### **Steps:**

1. **Create an IAM Role**

   - In the **IAM Dashboard**, go to **Roles** > **Create Role**.
   - **Select Type of Trusted Entity**: Choose **AWS Service**.
   - **Common Use Cases**: Select **EC2**.
   - Click **Next: Permissions**.
   - **Attach Policies**:
     - Select `AmazonS3ReadOnlyAccess`.
   - Click **Next: Tags** (optional), then **Next: Review**.
   - **Role Name**: `EC2S3ReadOnlyRole`.
   - Click **Create Role**.

2. **Launch an EC2 Instance with the IAM Role**

   - Navigate to the **EC2 Dashboard** > **Instances** > **Launch Instance**.
   - **AMI**: Choose an Amazon Linux 2 AMI.
   - **Instance Type**: Select `t2.micro`.
   - **Configure Instance Details**:
     - In the **IAM Role** dropdown, select `EC2S3ReadOnlyRole`.
   - **Configure Security Group**:
     - Allow **SSH** access from your IP.
   - **Review and Launch** the instance.

3. **Test S3 Access from EC2 Instance**

   - Connect to the EC2 instance via SSH.

     ```bash
     ssh -i /path/to/your-key.pem ec2-user@your-instance-public-ip
     ```

   - List S3 buckets:

     ```bash
     aws s3 ls
     ```

   - **Note**: You should see the list of S3 buckets without configuring access keys.

### **Lab 3: Implementing IAM Best Practices**

#### **Objective:**

- Enable MFA for an IAM user.
- Set a strong password policy.
- Create a customer managed policy.

#### **Steps:**

1. **Enable MFA for an IAM User**

   - In the **IAM Dashboard**, go to **Users**.
   - Select user `alice`.
   - Navigate to the **Security Credentials** tab.
   - Under **Assigned MFA device**, click **Manage MFA**.
   - Choose **Virtual MFA device**.
   - Use an authenticator app (e.g., Google Authenticator) to scan the QR code.
   - Enter two consecutive MFA codes from the app.
   - Click **Assign MFA**.

2. **Set a Password Policy**

   - In the **IAM Dashboard**, select **Account Settings**.
   - Under **Password Policy**, click **Set password policy**.
   - Configure settings:
     - Require at least one uppercase letter.
     - Require at least one number.
     - Require at least one non-alphanumeric character.
     - Minimum password length: 12 characters.
     - Enable password expiration (e.g., every 90 days).
   - Click **Apply password policy**.

3. **Create a Customer Managed Policy**

   - Navigate to **Policies** > **Create Policy**.
   - **Visual Editor** or **JSON**: Use Visual Editor.
   - **Service**: Select **EC2**.
   - **Actions**: Choose specific actions like `StartInstances` and `StopInstances`.
   - **Resources**: Specify resources or choose **All resources**.
   - Click **Review Policy**.
   - **Name**: `EC2StartStopPolicy`.
   - **Description**: Allows starting and stopping EC2 instances.
   - Click **Create Policy**.

4. **Attach the Policy to a User or Group**

   - Go to **Users** or **Groups**.
   - Select `alice` or `Developers` group.
   - Navigate to the **Permissions** tab.
   - Click **Add Permissions** > **Attach existing policies directly**.
   - Search for `EC2StartStopPolicy`.
   - Select it and click **Add Permissions**.

---

## **Conclusion**

AWS IAM is a foundational service that plays a critical role in securing your AWS environment. By effectively managing users, groups, roles, and policies, and following best practices, you can ensure that your resources are protected and that users have appropriate access to perform their tasks.

---
