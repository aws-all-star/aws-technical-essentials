# 2. Identity and Access Management(IAM)

***AWS ID 및 액세스 관리(IAM)*** 는 AWS 계정 및 리소스에 대한 액세스를 관리하는 데 도움이 되는 AWS 서비스입니다. 또한 AWS 계정 내에서 허용되는 사람과 것(인증), 그리고 AWS 리소스를 사용하고 작업할 수 있는 권한을 가진 사람과 사람에 대한 중앙 집중식 보기(승인)를 제공합니다.
![image](https://github.com/user-attachments/assets/d68df330-79ee-4ca8-9966-73a49d691e9c)

IAM을 사용하면 액세스 키 또는 암호를 공유하지 않고도 AWS 계정 및 리소스에 대한 액세스를 공유할 수 있습니다. 또한 계정에서 작업하는 사람들에게 세분화된 액세스를 제공할 수 있으므로 사람과 서비스는 필요한 리소스에 대한 권한만 가질 수 있습니다.
</br></br>

## 특징
* IAM은 전 세계적이며 특정 지역에 국한되지 않습니다. AWS 관리 콘솔의 모든 지역에서 IAM 구성을 보고 사용할 수 있습니다.
* IAM은 기본적으로 많은 AWS 서비스와 통합되어 있습니다.
* IAM에서 암호 정책을 설정하여 사용자의 복잡성 요구 사항과 필수 로테이션 기간을 지정할 수 있습니다.
* IAM은 MFA를 지원합니다.
* IAM은 ID 페더레이션을 지원하므로 이미 다른 곳(예: 기업 네트워크 또는 인터넷 ID 제공업체)에서 암호를 가지고 있는 사용자가 AWS 계정에 일시적으로 액세스할 수 있습니다.
* 모든 AWS 고객은 IAM을 사용할 수 있습니다. 이 서비스는 추가 비용 없이 제공됩니다.
</br>

## 사용자

**IAM 사용자**는 AWS와 상호 작용하는 사람 또는 서비스를 나타냅니다. AWS 계정에서 사용자를 정의합니다. 해당 사용자가 수행한 모든 활동은 귀하의 계정에 청구됩니다. 사용자를 생성하면 해당 사용자가 로그인하여 계정 내의 AWS 리소스에 액세스할 수 있습니다.
</br>

## 사용자 자격 증명

**IAM 사용자**는 이름과 자격 증명 세트로 구성됩니다. 사용자를 생성할 때 다음과 같은 유형의 접근 권한을 제공할 수 있습니다.
* AWS 관리 콘솔에 대한 액세스
* AWS 명령줄 인터페이스(AWS CLI) 및 AWS 애플리케이션 프로그래밍 인터페이스(AWS API)에 대한 프로그래밍 액세스

AWS 관리 콘솔에 액세스하려면 사용자에게 사용자 이름과 암호를 제공하십시오. 프로그래밍 방식의 액세스를 위해 AWS는 AWS CLI 및 AWS API와 함께 사용할 수 있는 액세스 키 세트를 생성합니다. IAM 사용자 자격 증명은 영구적인 것으로 간주되며, 이는 관리자가 강제로 교체할 때까지 사용자에게 남아 있음을 의미합니다.
</br>

## 그룹

**IAM 그룹**은 사용자의 집합입니다. 그룹의 모든 사용자는 그룹에 할당된 권한을 상속받습니다. 이를 통해 한 번에 여러 사용자에게 권한을 부여할 수 있습니다. AWS 계정의 사용자에 대한 권한을 관리하는 보다 편리하고 확장 가능한 방법입니다. 그렇기 때문에 IAM 그룹을 사용하는 것이 모범 절차입니다.

그룹의 다음 기능을 염두에 두십시오.

* 그룹은 많은 사용자를 가질 수 있다.
* 사용자는 많은 그룹에 속할 수 있습니다.
* 그룹은 그룹에 속할 수 없습니다.

루트 사용자는 기본적으로 AWS 계정 내의 모든 리소스에 대해 모든 작업을 수행할 수 있습니다. 이는 새로운 IAM 사용자, 새로운 그룹 또는 새로운 역할을 생성하는 것과는 대조적입니다. 새로운 IAM ID는 명시적으로 권한을 부여할 때까지 기본적으로 AWS 계정 내에서 어떠한 작업도 수행할 수 없습니다.
</br>

## 정책
AWS 서비스 및 리소스에 대한 액세스를 관리하고 권한을 제공하려면 IAM 정책을 생성하여 IAM 사용자, 그룹 및 역할에 첨부합니다. 사용자나 역할이 요청을 할 때마다 AWS는 그들과 관련된 정책을 평가합니다.

예제:
```json
{
   "Version": "2012-10-17",
   "Statement": [{
      "Effect": "Allow",
      "Action": "*",
      "Resource": "*"
   }]
}
```

그의 정책에는 네 가지 주요 JSON 요소가 있습니다: **Version**, **Effect**, **Action**, 그리고 **Resource**.

- **Version** 요소는 정책 언어의 버전을 정의합니다. AWS가 정책을 처리하는 데 필요한 언어 구문 규칙을 지정합니다. 사용 가능한 모든 정책 기능을 사용하려면 정책의 **"Statement"** 요소 앞에 **"Version": "2012-10-17"** 을 포함하십시오.
- **Effect** 요소는 문이 접근을 허용하거나 거부할지 여부를 지정합니다. 이 정책에서 효과는 **"Allow"** 이며, 이는 특정 리소스에 대한 액세스를 제공하고 있음을 의미합니다.
- **Action** 요소는 허용 또는 거부되어야 하는 작업 유형을 설명합니다. 예시 정책에서 동작은 **"*"** 입니다. 이것을 *와일드카드*라고 하며, AWS 계정 내의 모든 행동을 상징하는 데 사용됩니다.
- **Resource** 요소는 정책 문이 다루는 객체를 지정합니다. 정책 예에서 리소스는 와일드카드 **"*"** 입니다. 이것은 AWS 콘솔 내부의 모든 리소스를 나타냅니다.
</br>

### 정책 구조
| 요소	 | 설명	 | 필수 |
|-------------	 |------------------------------------------------------------------------	 |---------	 |
| **Effect**	 | 허용 또는 명시적 거부를 초래할지 여부를 지정합니다.	 | √ |
| **Action**	 | 허용되거나 거부될 특정 Action을 설명합니다.	 | √ |
| **Resource**	 | 대상 또는 대상을 지정합니다.	 | √ |
</br>


## **IAM 적용 Best Practise**
IAM 정책의 검증된 Best Practise를 구현하면 AWS 환경의 보안이 향상됩니다.

### **1. MFA(다단계 인증) 활성화**
- **이유**: 두 번째 형태의 인증을 요구하여 추가 보안 계층을 추가
- **사례**: 루트 계정 및 콘솔 접근 권한이 있는 모든 IAM 사용자에 대해 MFA를 활성화

### **2. EC2**에서 실행되는 응용 프로그램에 대한 역할 사용
- **이유**: 애플리케이션에 장기 자격 증명을 삽입하는 것을 피함
- **사례**: 응용 프로그램에 권한을 부여하기 위해 EC2 인스턴스에 IAM 역할을 할당

### **3. 최소 권한 부여**
- **이유**: 무단 액세스의 위험을 최소화
- **사례**: 사용자와 역할에 작업을 수행하는 데 필요한 권한만 부여

### **4. 자격 증명을 정기적으로 회전**
- **이유**: 유출된 자격 증명을 사용할 수 없도록 함.
- **사례**: 암호 및 액세스 키를 주기적으로 변경

### **5. 그룹을 사용하여 권한 할당**
- **이유**: 권한 관리를 단순화
- **사례**: 개별 사용자가 아닌 그룹에 권한을 할당

### **6. 고객 관리 정책 사용**
- **이유**: 권한에 대한 더 많은 제어를 제공합니다.
- **사례**: 조직의 요구에 맞춘 자신만의 정책을 만들고 관리

### **7. 활동 모니터링**
- **이유**: 승인되지 않았거나 비정상적인 활동을 감지
- **사례**: AWS CloudTrail을 활성화하여 API 호출 및 활동을 기록

### **8. 보안 루트 계정**
- **이유**: 루트 계정에 무제한 액세스 권한이 확인
- **사례**: 일일 작업에 루트 계정을 사용하지 마십시오. MFA를 활성화하고 관리 작업을 위해 별도의 IAM 사용자를 생성합니다.

### **9. 강력한 암호 정책 시행**
- **이유**: 쉽게 추측할 수 있는 암호를 방지
- **사례**: 복잡하고 주기적인 변경이 필요한 암호 정책을 설정



